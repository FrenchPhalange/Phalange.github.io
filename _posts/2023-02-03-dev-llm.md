---
layout: post
title:  "Les IA peuvent-elles coder √† notre place ?"
date:   2023-02-03 17:00:38 +0100
image:  '/images/blog/dev-llm/header.png'
tags:   [IA]
---

J'ai donn√© 5 exercices de code √† **ChatGPT** et **GitHub Copilot**, voici les r√©sultats.

Pour chaque exercice, je donne √† l'IA un bout de code et un commentaire pour lui expliquer ce qu'elle doit faire.

J'ai choisi des cas simples, avec des probl√©matiques r√©alistes que l'on peut rencontrer dans des projets de dev.

## EXERCICE 1

On commence en douceur avec un √©chauffement Python, la fonction doit **t√©l√©charger une image puis calculer son hash**. Une fonction utilitaire tr√®s classique qui s'√©crit en quelques lignes. 

<div class="gallery-box">
  <div class="gallery">
  <img src="/images/blog/dev-llm/1621539169737621504-FoDbezKXoAAqoRS.jpg" draggable="false">
  </div>
</div>

Aucune difficult√© pour ChatGPT, c'est tr√®s propre et la fonction marche tr√®s bien :

<div class="gallery-box">
  <div class="gallery">
  <img src="/images/blog/dev-llm/1621539172925177856-FoDbnySXkAEZi06.jpg" draggable="false">
  </div>
</div>

Je trouve que ChatGPT a un style particulier qui d√©compose beaucoup les instructions avec des variables interm√©diaires, mais c'est pas g√™nant parce que le nommage est explicite. 

Pour Copilot, c'est √† mon avis un **sans-faute** : une construction √©l√©gante, et des commentaires pour structurer la fonction :

<div class="gallery-box">
  <div class="gallery">
  <img src="/images/blog/dev-llm/1621539176524009479-FoDbs_cWYAEx63F.jpg" draggable="false">
  </div>
</div>

Difficile de faire mieux, √ßa passe le test de Turing sans souci üòÑ 

## EXERCICE 2

Une autre probl√©matique tr√®s commune du m√©tier de dev, c'est l'√©criture de **tests unitaires** qui couvrent un maximum de cas possibles.

<div class="gallery-box">
  <div class="gallery">
  <img src="/images/blog/dev-llm/1621539180026249217-FoDby-_WIAMhGY2.jpg" draggable="false">
  </div>
</div>

Avec une simple explication de la fonction √† tester et un exemple de test fourni, c'est √† l'IA de nous fournir une suite de testcases. 

Aucune difficult√© pour ChatGPT sur cet exercice.

<div class="gallery-box">
  <div class="gallery">
  <img src="/images/blog/dev-llm/1621539183322882050-FoDb4-0WYAMWmme.jpg" draggable="false">
  </div>
</div>

J'aurais appr√©ci√© voir des testcases plus subtils (nombres n√©gatifs, type incorrect pass√© √† la fonction, ...) mais on a d√©j√† une bonne couverture des cas particuliers. 

En revanche pour Copilot, c'est un abandon total : il m'a simplement donn√© le d√©but de la ligne suivante et s'est arr√™t√© l√†.

<div class="gallery-box">
  <div class="gallery">
  <img src="/images/blog/dev-llm/1621539186766389249-FoDb9llWIAEVhs-.jpg" draggable="false">
  </div>
</div>

Impossible de le faire continuer, m√™me en lui proposant quelques exemples de plus. 

## EXERCICE 3

<div class="gallery-box">
  <div class="gallery">
  <img src="/images/blog/dev-llm/1621539190251864064-FoDcC2gXwAA8dcq.jpg" draggable="false">
  </div>
</div>

On a beaucoup parl√© de cette fonction Java dans un projet du gouvernement des Pays-Bas.

Garder la structure initiale qui est plus lisible, ou ajouter une boucle pour plus d'√©l√©gance ? J'ai demand√© leur avis √† nos deux intelligences artificielles. 

Pour ChatGPT pas de doute, on est dans l'√©quipe "rockstar developer" :

<div class="gallery-box">
  <div class="gallery">
  <img src="/images/blog/dev-llm/1621539193720639489-FoDcO_9WQAIX6da.jpg" draggable="false">
  </div>
</div>

Le gros souci, c'est que la deuxi√®me consigne n'est absolument pas respect√©e : sur certains cas (0.33 par exemple) le comportement est modifi√©. 

Sur ce m√™me exercice, Copilot a une approche radicalement diff√©rente : sa seule modification a √©t√© d'ajouter des accolades :

<div class="gallery-box">
  <div class="gallery">
  <img src="/images/blog/dev-llm/1621539197021556737-FoDcUKDX0AYRVUL.jpg" draggable="false">
  </div>
</div>

On aurait au minimum appr√©ci√© voir une suppression des conditions redondantes, mais au moins le code respecte la sp√©cification initiale. 

D'ailleurs, si vous voulez vous pr√™ter √† cet exercice (avec ou sans l'aide d'une IA üòá), j'ai cr√©√© un **playground** CoderPad qui teste automatiquement que votre code refactoris√© est correct : [https://app.coderpad.io/sandbox?...](https://app.coderpad.io/sandbox?question_id=239933?utm_campaign=23-Q1-Social-Twitter-TOFU-All-Global-MathisHammel&utm_source=Twitter&utm_medium=social)

## EXERCICE 4

Je ne pouvais pas √©crire ce comparatif sans inclure une partie algorithmique, voyons comment les IA s'en sortent !

C'est un probl√®me ultra classique de recherche de sous-cha√Æne, plein de ressources existent sur internet. 

<div class="gallery-box">
  <div class="gallery">
  <img src="/images/blog/dev-llm/1621539202348290054-FoDcZJAWAAAFH41.jpg" draggable="false">
  </div>
</div>

Le code fourni par ChatGPT est correct, il impl√©mente l'algorithme de string matching le plus commun.

Niveau performance, on est cependant **tr√®s loin** de ce qui est demand√©. Ce code a une complexit√© O(N*M) alors qu'il existe des algorithmes en O(N). 

<div class="gallery-box">
  <div class="gallery">
  <img src="/images/blog/dev-llm/1621539205703680009-FoDcgBwXEAcVFmX.jpg" draggable="false">
  </div>
</div>

Le joueur Copilot d√©clare encore forfait sur ce round (c'est lui qui a √©crit les deux lignes).

Contact√© par nos √©quipes, le patron de GitHub aurait d√©clar√© "t'as cru les algos √ßa sert dans la vraie vie mdr bouffon". 

<div class="gallery-box">
  <div class="gallery">
  <img src="/images/blog/dev-llm/1621539208962707456-FoDcbquWAAEATAs.jpg" draggable="false">
  </div>
</div>

L'avantage de ChatGPT c'est son aspect conversationnel, j'ai pu lui indiquer le probl√®me de performance de son algo pour qu'il le corrige.

Sa nouvelle solution propos√©e est l'algorithme de Rabin-Karp, ce qui correspond √† la complexit√© que j'attendais. 

<div class="gallery-box">
  <div class="gallery">
  <img src="/images/blog/dev-llm/1621539212154621953-FoDckDUXkAA2kuR.jpg" draggable="false">
  </div>
</div>

J'ai quand m√™me deux probl√®mes avec la nouvelle solution de ChatGPT ci-dessus :

- Le code plante pendant l'ex√©cution √† cause d'un probl√®me d'indice
- Il existe en r√©alit√© une solution beaucoup plus simple (et tr√®s performance) que voici : 

<div class="gallery-box">
  <div class="gallery">
  <img src="/images/blog/dev-llm/1621539215434473473-FoDacCdXoAUKhUI.jpg" draggable="false">
  </div>
</div>

## EXERCICE 5

Pour ce dernier challenge, le code doit ex√©cuter une requ√™te sur une base de donn√©es.

En fait, c'est une question pi√®ge : je ne m'int√©resse pas la conception de la fonction, **je veux surtout m'assurer que le code ne pr√©sente pas de vuln√©rabilit√© de s√©curit√©**. Et vous allez voir que c'est pas gagn√©.

<div class="gallery-box">
  <div class="gallery">
  <img src="/images/blog/dev-llm/1621539218567708674-FoDcqhVXkAAcZoe.jpg" draggable="false">
  </div>
</div>

Bingo pour ChatGPT qui tombe dans mon pi√®ge : ici, on a une belle injection SQL possible si on contr√¥le la variable `fields`.

Une **vuln√©rabilit√© critique** qui permet de faire fuiter toute la base de donn√©es. 

<div class="gallery-box">
  <div class="gallery">
  <img src="/images/blog/dev-llm/1621539221872824321-FoDc88rWQAAQzbH.jpg" draggable="false">
  </div>
</div>

Du c√¥t√© de Copilot c'est la m√™me chose, l'absence de **requ√™tes param√©tr√©es** est un √©norme red flag dans un code qui fait des requ√™tes SQL.

Dommage que nos deux IA soient tomb√©es dans le panneau si facilement. 

<div class="gallery-box">
  <div class="gallery">
  <img src="/images/blog/dev-llm/1621539224993366018-FoDcwZqWAAIn-Qr.jpg" draggable="false">
  </div>
</div>

## CONCLUSION &amp; ANALYSE

Pour chaque √©preuve, j'ai accord√© une note √† chaque IA. Le r√©sultat est tr√®s mitig√©, avec ChatGPT qui arrive √† peine √† d√©crocher la moyenne.

Et malgr√© sa note plus basse (li√©e aux 2 exos qu'il n'a pas voulu r√©soudre), j'ai pr√©f√©r√© Copilot ! 

<div class="gallery-box">
  <div class="gallery">
  <img src="/images/blog/dev-llm/1621539228101345282-FoDdMqxXEAIfLfk.jpg" draggable="false">
  </div>
</div>

Voici mes ressentis de cette exp√©rience et de l'avenir des IAs dans le monde du dev :

- On voit tr√®s vite que Copilot et ChatGPT fonctionnent tr√®s diff√©remment : ChatGPT est plus polyvalente, mais on ressent une vraie expertise de code chez Copilot.
- Le fait que ChatGPT soit oblig√© de r√©pondre, c'est une √©p√©e √† double tranchant : ses solutions sont parfois √† c√¥t√© de la plaque, mais impossible de s'en rendre compte sans conna√Ætre soi-m√™me la bonne r√©ponse.
- La le√ßon la plus importante de cette exp√©rience, c'est qu'on est **assez loin de pouvoir remplacer les devs**. L'IA est un outil fantastique qui permet de gagner beaucoup de temps, mais il est encore absolument n√©cessaire d'avoir l'expertise et le recul de l'humain derri√®re.
